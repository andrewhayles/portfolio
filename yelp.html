<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Andrew Hayles - Yelp Academic Dataset</title>

    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
  /* --- Base Styles & Color Variables --- */
  :root {
    /* We only need the light theme colors now */
    --light: #ffffff;
    --onLight: #050806; /* Dark text */
    --primary: #0804F6;
    --secondary: #FE491F;
    --complementary: #565862; /* Dark gray for footer text */
    --textOnImage: #FBFFF2; /* White text for hero */
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-900: #111827; /* Dark background for project cards */
  }
  body {
    background-color: var(--light);
    color: var(--onLight);
    font-family: 'Inter', sans-serif;
  }

  /* --- Styles for text on the hero background image --- */
  /* This ensures the hero text is always white */
  .hero-section-text {
    color: var(--textOnImage);
	overflow-wrap: break-word;
  }

  /* --- Converted .prose Styles (Light Theme Only) --- */
  .prose { color: var(--onLight); max-width: 75ch; }
  .prose h1, .prose h2, .prose h3, .prose h4 { font-family: "DM Mono", monospace; text-transform: uppercase; font-weight: 400; color: var(--onLight); }
  .prose h1 { font-size: 1.875rem; margin-bottom: 2rem; margin-top: 0; }
  .prose h2 { font-size: 1.5rem; margin-bottom: 1.5rem; margin-top: 3rem; }
  .prose h3 { font-size: 1.25rem; margin-bottom: 1rem; margin-top: 2rem; }
  .prose h4 { font-size: 1.125rem; margin-bottom: 1rem; margin-top: 1.5rem; }
  .prose p { margin-bottom: 1.5rem; line-height: 1.8; font-size: 1.125rem; }
  .prose a { color: var(--primary) !important; font-weight: 700 !important; text-decoration: underline !important; text-decoration-thickness: 2px !important; text-underline-offset: 4px !important; }
  .prose a:hover { opacity: 0.7; transition: opacity 0.2s; }
  .prose img { border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1); margin-top: 2rem; margin-bottom: 2rem; max-width: 100%; height: auto; margin-left: auto; margin-right: auto; }
  .prose blockquote { border-left: 4px solid var(--primary); padding-left: 1rem; font-style: italic; margin-top: 1.5rem; margin-bottom: 1.5rem; }
  @media (min-width: 768px) {
    .prose h1 { font-size: 2.25rem; } .prose h2 { font-size: 1.875rem; }
    .prose h3 { font-size: 1.5rem; } .prose h4 { font-size: 1.25rem; }
  }

  /* --- Converted Tailwind Utility Classes (Light Theme Only) --- */
  .container { width: 100%; margin-left: auto; margin-right: auto; padding-left: 1rem; padding-right: 1rem; }
  @media (min-width: 640px) { .container { max-width: 640px; } }
  @media (min-width: 768px) { .container { max-width: 768px; } }
  @media (min-width: 1024px) { .container { max-width: 1024px; } }
  .block { display: block; } .flex { display: flex; } .grid { display: grid; }
  .flex-col { flex-direction: column; } .min-h-screen { min-height: 100vh; }
  .flex-grow { flex-grow: 1; } .justify-between { justify-content: space-between; }
  .justify-center { justify-content: center; } .items-center { align-items: center; }
  .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
  .gap-8 { gap: 2rem; } .relative { position: relative; } .absolute { position: absolute; }
  .sticky { position: sticky; } .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
  .top-0 { top: 0; } .z-50 { z-index: 50; } .w-full { width: 100%; }
  .h-64 { height: 16rem; } .w-6 { width: 1.5rem; } .h-6 { height: 1.5rem; }
  .object-cover { object-fit: cover; } .overflow-hidden { overflow: hidden; }
  .rounded-lg { border-radius: 0.5rem; } .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
  .border-b { border-bottom-width: 1px; } .border-gray-200 { border-color: var(--gray-200); }
  .px-4 { padding-left: 1rem; padding-right: 1rem; } .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
  .py-12 { padding-top: 3rem; padding-bottom: 3rem; } .py-16 { padding-top: 4rem; padding-bottom: 4rem; }
  .py-36 { padding-top: 9rem; padding-bottom: 9rem; } .p-6 { padding: 1.5rem; }
  .mt-3 { margin-top: 0.75rem; } .mt-4 { margin-top: 1rem; } .mb-4 { margin-bottom: 1rem; }
  .mb-12 { margin-bottom: 3rem; } .text-center { text-align: center; }
  .space-x-4 > :not([hidden]) ~ :not([hidden]) { margin-left: 1rem; }
  .space-x-6 > :not([hidden]) ~ :not([hidden]) { margin-left: 1.5rem; }
  .text-sm { font-size: 0.875rem; } .text-base { font-size: 1rem; }
  .text-xl { font-size: 1.25rem; } .text-2xl { font-size: 1.5rem; }
  .text-3xl { font-size: 1.875rem; } .text-4xl { font-size: 2.25rem; }
  .font-mono { font-family: "DM Mono", monospace; } .font-sans { font-family: 'Inter', sans-serif; }
  .uppercase { text-transform: uppercase; } .font-bold { font-weight: 700; }
  .font-medium { font-weight: 500; } .backdrop-blur-sm { backdrop-filter: blur(4px); }
  .transition-transform { transition-property: transform; } .duration-300 { transition-duration: 300ms; }
  .transform { transform: translate(0, 0) rotate(0) skewX(0) skewY(0) scaleX(1) scaleY(1); }
  .hover\:-translate-y-2:hover { transform: translateY(-0.5rem); }
  .hover\:text-primary:hover { color: var(--primary); }
  .group:hover .group-hover\:text-primary { color: var(--primary); }
  .group:hover .group-hover\:underline { text-decoration: underline; }
  .inline-block { display: inline-block; }
  .bg-white { background-color: #fff; }
  .bg-gray-100 { background-color: var(--gray-100); }
  .bg-light\/95 { background-color: rgba(255, 255, 255, 0.95); }
  .bg-complementary\/75 { background-color: rgba(86, 88, 98, 0.75); }
  .text-onLight { color: var(--onLight); }
  .text-complementary { color: var(--complementary); }
  @media (min-width: 768px) {
    .md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .md\:space-x-6 > :not([hidden]) ~ :not([hidden]) { margin-left: 1.5rem; }
    .md\:text-2xl { font-size: 1.5rem; } .md\:text-4xl { font-size: 2.25rem; }
    .md\:text-6xl { font-size: 3.75rem; } .md\:py-24 { padding-top: 6rem; padding-bottom: 6rem; }
    .md\:py-48 { padding-top: 12rem; padding-bottom: 12rem; }
  }
  @media (min-width: 1024px) { .lg\:gap-12 { gap: 3rem; } }
</style>
</head>

<body class="bg-light dark:bg-dark font-sans text-onLight dark:text-onDark transition-colors duration-300">
  <div class="flex flex-col min-h-screen">

    <!-- === Header (Consistent with index.html) === -->
    <header class="bg-light/95 dark:bg-dark/90 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-200 dark:border-gray-800">
      <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
        <!-- Site Title -->
        <a href="index.html" class="text-xl font-mono uppercase font-bold text-onLight dark:text-onDark hover:text-primary dark:hover:text-secondary">
          Home
        </a>
        
        <!-- Nav Links -->
        <div class="flex items-center space-x-4 md:space-x-6">
          <a href="about.html" class="text-onLight dark:text-onDark hover:text-primary dark:hover:text-secondary font-mono uppercase text-sm font-medium">About</a>
          <a href="https://github.com/andrewhayles/" target="_blank" rel="noopener noreferrer" class="text-onLight dark:text-onDark hover:text-primary dark:hover:text-secondary" aria-label="GitHub">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.165 6.839 9.49.5.092.682-.217.682-.483 0-.237-.009-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.951 0-1.093.39-1.988 1.03-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.026 2.747-1.026.546 1.379.202 2.398.1 2.65.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.309.678.92.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0 0 22 12c0-5.523-4.477-10-10-10Z" clip-rule="evenodd" /></svg>
          </a>
        </div>
      </nav>
    </header>

    <!-- === Main Content === -->
    <main class="flex-grow">
      <!-- Using max-w-4xl for a comfortable reading width for articles -->
      <div class="container mx-auto px-4 py-16 md:py-24 max-w-4xl prose">
        
        <!-- Title from frontmatter -->
        <h1>Yelp Academic Dataset</h1>
		<br>
        <!-- Main content from markdown body -->
        <p>This project was done as part of a class on Coursera for learning SQL. I learned a lot about the data in this dataset using these methods and became much more comfortable using the SQL query language after having finished this project. The SQL code for creating the original tables, the Python code for importing the data into the tables, and the SQL code for querying the database are all included on this website.</p>
        <br>
        <p>By inspection of the JSON files that can be downloaded here: <a href="https://business.yelp.com/data/resources/open-dataset/" target="_blank" rel="noopener noreferrer">https://business.yelp.com/data/resources/open-dataset/</a> it can be determined what tables are needed and what columns are needed in each of those tables. Upon further inspection it can be determined what are good choices for the primary keys and the foreign keys to ensure data integrity. For example, since each business has one and only one identification for it, that is a good primary key for the business table (that's the definition of a primary key). Since friends also have to be established users, a foreign key for the friends table is the friend ID that refers back to a specific user ID in the users table. Having plenty of interconnections like this ensures that there aren't ghost entries when the data is imported and that if there are, they are identified and can be removed before data analysis begins. Here's a snippet of a JSON file from the original dataset:</p>
        <br>
        <pre><code class="language-json">{"user_id":"2WnXYQFK0hXEoTxPtV2zvg","name":"anonymized","review_count":665,"yelping_since":"2008-07-25 10:41:00","useful":2086,"funny":1010,"cool":1003,"elite":"2009,2010,2011,2012,2013","friends":"LuO3Bn4f3rlhyHIaNfTlnA, j9B4XdHUhDfTKVecyWQgyA, pypZb3V5TXHOnlTj-qLSrw,"fans":52,"average_stars":3.32,"compliment_hot":89,"compliment_more":13,"compliment_profile":10,"compliment_cute":17,"compliment_list":3,"compliment_note":66,"compliment_plain":96,"compliment_cool":119,"compliment_funny":119,"compliment_writer":35,"compliment_photos":18}</code></pre>
        <br>
        <p>As can be seen, this JSON file "users.JSON" is a good candidate for a table, and each one of these variables in quotes followed by a colon is a good candidate for a column. So there is an intuitive data structure built into this particular dataset that allows for smooth transitioning into a SQLite database. This is not guaranteed by any means in a given dataset. This is a very "nice" dataset for SQL analysis.</p>
        <br>
        <p>After careful inspection of the files and careful coding for the SQL tables, I had a good sense of the data and the connections between the tables, and so I was in a good position to create an ERD (Entity-Relationship Diagram) using Microsoft Paint. It looks like this:</p>
        <br>
        <!-- Replaced local image with placeholder -->
        <img src="/images/ERD-project.webp" alt="ERD for Yelp academic dataset" style="max-width: 100%; height: auto; margin: 25px;">
        
        <p>The primary purpose of the project was to get a sense of what it meant to be a 5 star business and what it meant to be a 1 star business. To boil down the findings into their essence, I will simply say the best businesses had the highest frequency of positive words in the reviews and the worst businesses had the highest frequency of negative words in their reviews. These words that were analyzed are linked to instrinsic properties of the object to which they are applied. Words like excellence, quality, good, and kind, and words like lousy, poor, nasty, and rude are simple but they are strong differentiators between good businesses and bad businesses.</p>
        <br>
        <p>Statistical significance testing was done to confirm that there was indeed a significant difference in the number of occurrences of these words in the reviews of the best businesses versus the worst businesses based on the total number of reviews (Chi-squared testing). When the negative words appeared in the best business reviews it was virtually always a "false positive" or perhaps better stated to be a false occurrence of a negative word (in other words, they weren't being accused of being the negative word, the negative word was being used in a different context to distinguish the good business from a bad business, so it was not being used in the normal context that it would be applied to an actually bad business). When the positive words were found in the worst business reviews they were also almost always "false positives" or in other words the word "kind" showed up but it was in the context of, for example, "The customer service team was not kind to me." So there was some noise in the data but even with the noise there was a very strongly significant difference in the frequency of the positive words when the best businesses were compared with the worst businesses as determined by their average rating on Yelp.</p>
        <br>
        <p>When the users were analyzed that essentially made the best business on Yelp the best business by writing all the reviews for it, as predicted there was no particular characteristic that was common to all the users. They were all different when the various parameters describing the users were compared, there was no common feature that stood out amongst the different users. This was predictable because a good business is a good business to a person who yelps a lot, and they are a good business to a person who yelps only a little. A good business is a good business to a very popular user, and it is a good business to a user with few friends. A good business is a good business to long-standing Yelp users, and a good business is a good business to very new Yelp users. This study lends credence to the Yelp construct as it confirms that there are instrinsic properties to the highest rated businesses that transcend any distorting features of the user groups who are leaving the reviews. For example it is possible that the best business is only the best business because the people who frequent that business are users on Yelp whose average stars per review is always 5. In other words, they never leave bad reviews. That was not the case though. So there is some definite legitimacy to the best and worst businesses on Yelp. There are some predictable trends and characteristics of these businesses. A visual example of this is the number of occurrences of negative words like lousy, nasty, rude etc. versus the number of stars on Yelp, seen below:</p>
        
        <!-- Replaced local image with placeholder -->
        <img src="/images/negative_word_frequency.webp" alt="Graph of negative words in reviews of various ratings" style="max-width: 100%; height: auto; margin: 25px;">
        
        <p>It's amazing how sharp the drop is in negative word occurrences (y-axis) as the rating on Yelp (x-axis) increases. It requires an exponent in the regression model to capture the behavior of this relationship.</p>
        <br>
        <p>One of the most interesting findings during my analysis was that there was a very wide distribution of average rating per business based on zip code (it could be the case that all zip codes had an average rating that was about the same, but this was far from the reality in the data). This confirms a suspicion that the location of a business can be somehow related to the number of stars that business receives for its ratings. The extent to which this is true is astounding. Although deep investigation into this phenomenon was not made, it is something worth further study (for example, determining whether there was a statistically adequate number of businesses per zip code to be making distinctions in the average rating for those zip codes is a question that remains unanswered at this time). Perhaps this finding ties back to the old saying "Location! Location! Location!" in business circles.</p>


		<br>
        <p>The python script "import_data" found at the hyperlink below creates tables in the SQLite database for each of the indicated tables in the JSON files with a column for each indicated variable that has an object associated with it (whether it be some type of numerical value or a string or a boolean).</p>
		<br>


        <p>This is the Python code I used to import the data into the SQLite database tables that I created. As is evident the SQLite3 library was imported into the script first. The script is carefully designed to weed out any ghost entries in the tables, including reviews/tips/checkins by users that are not in the users table, reviews/tips/checkins of businesses that are not in the business table, etc. This ensures data integrity.</p>
		
		<br>
        <p><a href ="https://github.com/andrewhayles/yelp_project">Scripts used for this analysis</a></p>
		<br>
		
		<br>
        <p>Thank you for considering this data analysis on the Yelp academic data set. I hope it was informative and educating to you. If you have any feedback or comments please send me an email at <a href="mailto:andyhayles@gmail.com">andyhayles@gmail.com</a>.</p>
		<br>

      </div> <!-- /prose container -->
    </main>

    <!-- === Footer (Consistent with index.html) === -->
    <footer class="bg-gray-100 dark:bg-gray-900 text-complementary dark:text-onComplementary py-12">
      <div class="container mx-auto px-4 text-center">
        <div class="flex justify-center space-x-6 mb-4">
          <a href="mailto:andyhayles@gmail.com" class="hover:text-primary dark:hover:text-secondary">Contact</a>
          <a href="https://github.com/andrewhayles/" target="_blank" rel="noopener noreferrer" class="hover:text-primary dark:hover:text-secondary">GitHub</a>
        </div>
        <!-- Copyright text from config.json -->
        <p class="text-sm">Powered by <a href="https://www.netlify.com/" target="_blank" rel="noopener noreferrer" class="hover:text-primary dark:hover:text-secondary">Netlify</a></p>
        <p class="text-sm">&copy; 2024 Andrew Hayles. All rights reserved.</p>
      </div>
    </footer>

  </div><!-- /flex-col min-h-screen -->
</body>
</html>
